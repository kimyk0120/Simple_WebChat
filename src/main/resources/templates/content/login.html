<!DOCTYPE HTML>

<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<th:block th:include="layout/fragments/header"></th:block>

<body class="text-center">

    <!--  html 전체 영역을 지정하는 container -->
    <div id="container">
        <!--  login 폼 영역을 : loginBox -->
        <div id="loginBox">

            <!-- 로그인 페이지 타이틀 -->
            <div id="loginBoxTitle">WebChat</div>

            <div id="inputBox">
                <div class="input-form-box">
                    <label class="w-100">
                        <input type="text" name="uid" class="form-control" placeholder="Username" id="userName"  onkeyup="characterCheck(this)" />
                    </label>
                </div>
                <div class="button-login-box" >
                    <a role="button" class="btn btn-primary btn-lg w-100 p-2" >Login</a>
                </div>
            </div>

        </div>
    </div>

<th:block th:include="layout/fragments/scripts"></th:block>

<script>

    const username =  document.getElementById("userName");
    const loginBtn = document.querySelector(".button-login-box");

    username.addEventListener("keyup", function (event) {
        if (event.key === "Enter") {
            event.preventDefault();
            loginBtn.click();
        }
    });

    loginBtn.addEventListener("click", () => {
        if (username.value === "") {
            showToast("Please enter your username.", "info");
        } else {
            let reqObj = {username: username.value};
            console.log("reqObj : ", reqObj);

            axios.post(location.href+'/user', reqObj)
            .then(function (response) {
                console.log(response);

            })
            .catch(function (error) {
                showToast("Login failed.", "error");
                console.log(error);
            });
        }
    });

</script>

</body>
</html>


