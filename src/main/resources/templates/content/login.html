<!DOCTYPE HTML>

<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Login</title>
    <link rel="shortcut icon" href="#">
    <link rel="stylesheet" href="/libs/MDB5-STANDARD-UI-KIT-Free-6.1.0/css/mdb.min.css">
    <link rel="stylesheet" href="/css/login.css">
    <link rel="stylesheet" href="/css/toastify.css">
</head>

<body class="text-center">

    <!--  html 전체 영역을 지정하는 container -->
    <div id="container">
        <!--  login 폼 영역을 : loginBox -->
        <div id="loginBox">

            <!-- 로그인 페이지 타이틀 -->
            <div id="loginBoxTitle">WebChat</div>

            <div id="inputBox">
                <div class="input-form-box">
                    <label class="w-100">
                        <input type="text" name="uid" class="form-control" placeholder="Username" id="userName"  onkeyup="characterCheck(this)" />
                    </label>
                </div>
                <div class="button-login-box" >
                    <a role="button" class="btn btn-primary btn-lg w-100 p-2" >Login</a>
                </div>
            </div>

        </div>
    </div>

<script src="/libs/MDB5-STANDARD-UI-KIT-Free-6.1.0/js/mdb.min.js"></script>
<script src="/js/toastify.js"></script>
<script src="/libs/axios/dist/axios.js"></script>
<script src="/js/utils.js"></script>
<script>

    const username =  document.getElementById("userName");
    const loginBtn = document.querySelector(".button-login-box");

    username.addEventListener("keyup", function (event) {
        if (event.key === "Enter") {
            event.preventDefault();
            loginBtn.click();
        }
    });

    loginBtn.addEventListener("click", () => {
        if (username.value === "") {
            showToast("Please enter your username.", "info");
        } else {
            let reqObj = {username: username.value};
            console.log("reqObj : ", reqObj);

            axios.post(location.href+'/user', reqObj)
            .then(function (response) {
                console.log(response);
            })
            .catch(function (error) {
                showToast("Login failed.", "error");
                console.log(error);
            });
        }
    });



</script>
</body>
</html>


